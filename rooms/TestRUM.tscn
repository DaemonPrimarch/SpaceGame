[gd_scene load_steps=27 format=2]

[ext_resource path="res://nodes/room.tscn" type="PackedScene" id=1]
[ext_resource path="res://nodes/room_elements/ladders/walled_ladder.tscn" type="PackedScene" id=2]
[ext_resource path="res://addons/extended_camera_2D/camera_limit_area.gd" type="Script" id=3]
[ext_resource path="res://addons/extended_collision_polygon_2D/extended_collision_polygon_2D.gd" type="Script" id=4]
[ext_resource path="res://nodes/room_elements/moving_track.tscn" type="PackedScene" id=5]
[ext_resource path="res://nodes/room_elements/bullet_switch.tscn" type="PackedScene" id=6]
[ext_resource path="res://nodes/room_elements/moving_platforms/controllers/platform_mover.tscn" type="PackedScene" id=7]
[ext_resource path="res://nodes/room_elements/moving_platforms/platforms/player_stick_platform.tscn" type="PackedScene" id=8]
[ext_resource path="res://nodes/entities/enemies/back_forth_enemy.tscn" type="PackedScene" id=9]
[ext_resource path="res://nodes/entities/enemies/charging_enemy.tscn" type="PackedScene" id=10]
[ext_resource path="res://nodes/managers/platform_manager.tscn" type="PackedScene" id=11]
[ext_resource path="res://nodes/managers/bullet_hit_manager.tscn" type="PackedScene" id=12]
[ext_resource path="res://addons/state_labels/state_label.gd" type="Script" id=13]
[ext_resource path="res://addons/state_labels/label.svg" type="Texture" id=14]
[ext_resource path="res://nodes/entities/enemies/flying_enemy.tscn" type="PackedScene" id=15]
[ext_resource path="res://nodes/room_elements/destroyable_block.tscn" type="PackedScene" id=16]
[ext_resource path="res://nodes/room_elements/regular_damage_area.tscn" type="PackedScene" id=17]
[ext_resource path="res://nodes/entities/enemies/shadow_monster.tscn" type="PackedScene" id=18]
[ext_resource path="res://addons/player_enter_trigger/player_enter_trigger.gd" type="Script" id=19]
[ext_resource path="res://addons/player_enter_trigger/area.svg" type="Texture" id=20]
[ext_resource path="res://addons/extended_collision_polygon_2D/polygon.svg" type="Texture" id=21]
[ext_resource path="res://nodes/room_elements/moving_platforms/controllers/platform_extender.tscn" type="PackedScene" id=22]
[ext_resource path="res://nodes/room_elements/ladders/vertical_ladder.tscn" type="PackedScene" id=23]

[sub_resource type="Curve2D" id=1]

bake_interval = 5.0
_data = {
"points": PoolVector2Array( 0, 0, 0, 0, -352, 192, 0, 0, 0, 0, -352, -160 )
}

[sub_resource type="Curve2D" id=2]

bake_interval = 5.0
_data = {
"points": PoolVector2Array( 0, 0, 0, 0, -352, 192, 0, 0, 0, 0, 32, 192, 0, 0, 0, 0, 32, 16 )
}

[sub_resource type="Curve2D" id=3]

bake_interval = 5.0
_data = {
"points": PoolVector2Array( 0, 0, -42.5584, -39.4633, -32, -64, 0, 0, 71.9624, -72.7362, -32, -160, 0, 0, 47.2012, 47.9749, 96, -160, 0, 0, -60.3556, 69.641, 96, -64, 0, 0, 0, 0, -32, -64 )
}

[node name="room" index="0" instance=ExtResource( 1 )]

[node name="terrain" parent="." index="0"]

tile_data = PoolIntArray( -65481, 0, 0, -65480, 0, 0, -65479, 0, 0, -65478, 0, 0, -65477, 0, 0, 0, 0, 0, 1, 0, 0, 2, 0, 0, 3, 0, 0, 4, 0, 0, 5, 0, 0, 6, 0, 0, 7, 0, 0, 8, 0, 0, 9, 0, 0, 10, 0, 0, 11, 0, 0, 12, 0, 0, 13, 0, 0, 14, 0, 0, 15, 0, 0, 16, 0, 0, 17, 0, 0, 18, 0, 0, 19, 0, 0, 20, 0, 0, 21, 0, 0, 22, 0, 0, 23, 0, 0, 24, 0, 0, 25, 0, 0, 26, 0, 0, 27, 0, 0, 28, 0, 0, 29, 0, 0, 30, 0, 0, 31, 0, 0, 32, 0, 0, 33, 0, 0, 34, 0, 0, 35, 0, 0, 36, 0, 0, 37, 0, 0, 38, 0, 0, 39, 0, 0, 40, 0, 0, 41, 0, 0, 42, 0, 0, 43, 0, 0, 44, 0, 0, 45, 0, 0, 46, 0, 0, 47, 0, 0, 48, 0, 0, 49, 0, 0, 50, 0, 0, 51, 0, 0, 52, 0, 0, 53, 0, 0, 54, 0, 0, 55, 0, 0, 56, 0, 0, 57, 0, 0, 58, 0, 0, 59, 0, 0, 60, 0, 0, 61, 0, 0, 62, 0, 0, 63, 0, 0, 64, 0, 0, 65, 0, 0, 66, 0, 0, 67, 0, 0, 68, 0, 0, 69, 0, 0, 70, 0, 0, 71, 0, 0, 72, 0, 0, 73, 0, 0, 74, 0, 0, 75, 0, 0, 76, 0, 0, 77, 0, 0, 78, 0, 0, 79, 0, 0, 80, 0, 0, 81, 0, 0, 82, 0, 0, 83, 0, 0, 84, 0, 0, 85, 0, 0, 86, 0, 0, 87, 0, 0, 88, 0, 0, 89, 0, 0, 90, 0, 0, 91, 0, 0, 92, 0, 0, 93, 0, 0, 94, 0, 0, 95, 0, 0, 96, 0, 0, 97, 0, 0, 98, 0, 0, 99, 0, 0, 100, 0, 0, 101, 0, 0, 102, 0, 0, 103, 0, 0, 104, 0, 0, 105, 0, 0, 106, 0, 0, 107, 0, 0, 108, 0, 0, 109, 0, 0, 110, 0, 0, 111, 0, 0, 112, 0, 0, 113, 0, 0, 114, 0, 0, 115, 0, 0, 116, 0, 0, 117, 0, 0, 118, 0, 0, 119, 0, 0, 120, 0, 0, 121, 0, 0, 122, 0, 0, 123, 0, 0, 124, 0, 0, 125, 0, 0, 126, 0, 0, 127, 0, 0, 128, 0, 0, 129, 0, 0, 130, 0, 0, 65536, 0, 0, 65666, 0, 0, 131072, 0, 0, 131202, 0, 0, 196608, 0, 0, 196738, 0, 0, 262144, 0, 0, 262274, 0, 0, 327680, 0, 0, 327810, 0, 0, 393216, 0, 0, 393346, 0, 0, 458752, 0, 0, 458882, 0, 0, 524288, 0, 0, 524418, 0, 0, 589824, 0, 0, 589954, 0, 0, 655360, 0, 0, 655490, 0, 0, 720896, 0, 0, 721026, 0, 0, 786432, 0, 0, 786562, 0, 0, 851968, 0, 0, 851969, 0, 0, 851970, 0, 0, 851971, 0, 0, 851974, 9, 0, 851975, 9, 0, 851980, 9, 0, 851981, 9, 0, 851982, 9, 0, 851983, 9, 0, 851985, 9, 0, 851986, 9, 0, 851987, 9, 0, 851988, 9, 0, 851989, 9, 0, 851990, 9, 0, 851991, 9, 0, 851992, 0, 0, 851993, 9, 0, 851994, 9, 0, 851995, 9, 0, 851996, 9, 0, 851997, 9, 0, 851998, 9, 0, 851999, 9, 0, 852000, 9, 0, 852001, 9, 0, 852002, 9, 0, 852003, 9, 0, 852004, 9, 0, 852005, 9, 0, 852006, 9, 0, 852007, 9, 0, 852008, 9, 0, 852009, 9, 0, 852010, 9, 0, 852011, 9, 0, 852012, 9, 0, 852013, 9, 0, 852014, 9, 0, 852015, 9, 0, 852016, 9, 0, 852017, 9, 0, 852018, 9, 0, 852019, 9, 0, 852020, 9, 0, 852021, 9, 0, 852022, 9, 0, 852023, 9, 0, 852024, 9, 0, 852025, 9, 0, 852026, 9, 0, 852027, 9, 0, 852098, 0, 0, 917504, 0, 0, 917505, 0, 0, 917506, 0, 0, 917507, 0, 0, 917508, 0, 0, 917509, 0, 0, 917510, 0, 0, 917511, 0, 0, 917512, 0, 0, 917513, 0, 0, 917514, 0, 0, 917515, 0, 0, 917516, 0, 0, 917517, 0, 0, 917518, 0, 0, 917519, 0, 0, 917520, 0, 0, 917521, 0, 0, 917522, 0, 0, 917523, 0, 0, 917524, 0, 0, 917525, 0, 0, 917526, 0, 0, 917527, 0, 0, 917528, 0, 0, 917529, 0, 0, 917530, 9, 0, 917531, 9, 0, 917532, 9, 0, 917533, 9, 0, 917534, 9, 0, 917535, 9, 0, 917536, 9, 0, 917537, 9, 0, 917538, 9, 0, 917539, 9, 0, 917540, 9, 0, 917541, 9, 0, 917542, 9, 0, 917543, 9, 0, 917544, 9, 0, 917545, 9, 0, 917546, 9, 0, 917547, 9, 0, 917548, 9, 0, 917549, 9, 0, 917550, 9, 0, 917551, 9, 0, 917552, 9, 0, 917553, 9, 0, 917554, 9, 0, 917555, 9, 0, 917556, 9, 0, 917557, 9, 0, 917558, 9, 0, 917559, 9, 0, 917560, 9, 0, 917561, 9, 0, 917562, 9, 0, 917563, 9, 0, 917632, 0, 0, 917633, 0, 0, 917634, 0, 0 )

[node name="ladder" parent="." index="1" instance=ExtResource( 2 )]

position = Vector2( 96, 224 )
length = 640
flippedH = true

[node name="AutoGeneratedCameraLimitArea" type="Area2D" parent="." index="2"]

visible = false
input_pickable = true
gravity_vec = Vector2( 0, 1 )
gravity = 98.0
linear_damp = 0.1
angular_damp = 1.0
audio_bus_override = false
audio_bus_name = "Master"
script = ExtResource( 3 )
simple = false
can_zoom_out = false

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="AutoGeneratedCameraLimitArea" index="0"]

build_mode = 0
polygon = PoolVector2Array( 0, -64, 0, 960, 8384, 960, 8384, -64 )
script = ExtResource( 4 )

[node name="moving_track" parent="." index="3" instance=ExtResource( 5 )]

position = Vector2( 2656, 1024 )
speed = 384
length = 8000

[node name="bullet_switch" parent="." index="4" instance=ExtResource( 6 )]

position = Vector2( 8288, 768 )
state = true
toggleable = true

[node name="platform_mover" parent="." index="6" instance=ExtResource( 7 )]

position = Vector2( 3232, 672 )
curve = SubResource( 1 )
moving_speed = 128

[node name="platform" parent="platform_mover" index="0" instance=ExtResource( 8 )]

position = Vector2( -352, 192 )
_sections_unfolded = [ "Collision", "collision" ]
moveable_by_collision = false

[node name="platform_mover3" parent="." index="7" instance=ExtResource( 7 )]

position = Vector2( 3456, 593.455 )
scale = Vector2( 1, 0.909091 )
curve = SubResource( 2 )
moving_speed = 128

[node name="platform" parent="platform_mover3" index="0" instance=ExtResource( 8 )]

position = Vector2( -352, 192 )
_sections_unfolded = [ "Collision", "collision" ]
moveable_by_collision = false

[node name="enemy_1" parent="." index="8" instance=ExtResource( 9 )]

position = Vector2( 448, 800 )

[node name="enemy_2" parent="." index="9" instance=ExtResource( 10 )]

position = Vector2( 2272, 800 )

[node name="platform_manager" parent="enemy_2" index="10" instance=ExtResource( 11 )]

[node name="bullet_hit_manager" parent="enemy_2" index="11" instance=ExtResource( 12 )]

[node name="StringStateLabel" type="Label" parent="enemy_2" index="13"]

anchor_left = 0.0
anchor_top = 0.0
anchor_right = 0.0
anchor_bottom = 0.0
margin_left = -32.0
margin_top = -64.0
margin_right = 8.0
margin_bottom = -50.0
rect_pivot_offset = Vector2( 0, 0 )
rect_clip_content = false
mouse_filter = 2
mouse_default_cursor_shape = 0
size_flags_horizontal = 1
size_flags_vertical = 4
percent_visible = 1.0
lines_skipped = 0
max_lines_visible = -1
script = ExtResource( 13 )
__meta__ = {
"_editor_icon": ExtResource( 14 )
}
node_path = NodePath("..")
tracked_value = ""
tracked_function = "get_state"

[node name="bullet_switch2" parent="." index="10" instance=ExtResource( 6 )]

position = Vector2( 1760, 800 )

[node name="flying_enemy_system" parent="." index="11" instance=ExtResource( 15 )]

position = Vector2( 704, 576 )

[node name="path" parent="flying_enemy_system" index="0"]

position = Vector2( -2.32135, 96.9984 )
curve = SubResource( 3 )

[node name="path_follower" parent="flying_enemy_system/path" index="0"]

position = Vector2( -32, -64 )

[node name="destroyable_block" parent="." index="12" instance=ExtResource( 16 )]

position = Vector2( 1120, 672 )

[node name="damage_area" parent="." index="13" instance=ExtResource( 17 )]

position = Vector2( 2112, 800 )

[node name="shadow_monster" parent="." index="14" instance=ExtResource( 18 )]

position = Vector2( 1760, 736 )

[node name="PlayerEnterTrigger" type="Area2D" parent="." index="15"]

position = Vector2( 1504, 800 )
input_pickable = true
gravity_vec = Vector2( 0, 1 )
gravity = 98.0
linear_damp = 0.1
angular_damp = 1.0
audio_bus_override = false
audio_bus_name = "Master"
script = ExtResource( 19 )
__meta__ = {
"_editor_icon": ExtResource( 20 )
}
enabled = true
oneshot = false
free_on_disabled = false
save_path = null
trigger_on_freed = false

[node name="ExtendedCollisionPolygon2D" type="CollisionPolygon2D" parent="PlayerEnterTrigger" index="0"]

build_mode = 0
polygon = PoolVector2Array( -32, -32, 32, -32, 32, 32, -32, 32 )
script = ExtResource( 4 )
__meta__ = {
"_editor_icon": ExtResource( 21 )
}

[node name="flying_enemy_system2" parent="." index="16" instance=ExtResource( 15 )]

position = Vector2( 318.851, 592.152 )

[node name="platform_extender" parent="." index="17" instance=ExtResource( 22 )]

position = Vector2( 1418.73, 603.416 )
side_extending_distance = 0
up_extending_distance = 16
forward_starting_velocity = 16
forward_acceleration = 0
backward_acceleration = 0

[node name="player_stick_platform" parent="platform_extender" index="0" instance=ExtResource( 8 )]

flippedV = true

[node name="platform_mover2" parent="." index="18" instance=ExtResource( 7 )]

position = Vector2( 4000, 1472 )

[node name="vertical_ladder" parent="." index="19" instance=ExtResource( 23 )]

position = Vector2( 3680, 480 )
length = 384

[node name="player" parent="." index="20"]

position = Vector2( 832, 800 )
input_pickable = false
collision_layer = 2
collision_mask = 3
collision/safe_margin = 0.08
max_slope_angle = 0.785398
flippedH = false
flippedV = false
moveable_by_collision = true
current_state = "STANDING"
movement_speed = 360.0
gravity_enabled = true
gravity_vector = Vector2( 0, 1152 )
velocity = Vector2( 0, 0 )
max_velocity = Vector2( -1, -1 )
acceleration = Vector2( 0, 0 )
can_be_pushed = false
HP = 100
max_HP = 100
invulnerability_time = 1.0
action_override = false

[node name="light_1" parent="player/player_light" index="0"]

texture_scale = 2.0
energy = 0.8

[node name="AnimationPlayer" parent="player" index="8"]

root_node = NodePath("..")
autoplay = "idle"
playback_process_mode = 1
playback_default_blend_time = 0.0
playback_speed = 1.0
blend_times = [  ]
_sections_unfolded = [ "Playback Options" ]

[connection signal="switched_off" from="bullet_switch" to="moving_track" method="set_moving_forward" binds= [ false ]]

[connection signal="switched_on" from="bullet_switch" to="moving_track" method="set_moving_forward" binds= [ true ]]

[connection signal="player_entered" from="PlayerEnterTrigger" to="shadow_monster" method="attack_player"]


[editable path="platform_mover"]
[editable path="flying_enemy_system"]
[editable path="player"]
